<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<meta name="Author" content="VBird, 鸟哥">
	<meta name="Description" content="利用 vi 这个文字处理器喔！">
	<title>鸟哥的 Linux 私房菜 -- 第九章、vim 程序编辑器</title>
	<style type="text/css">
	</style>
	<link href="./vbird_files/style_2013.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="tablearea">
<div class="mainarea">
<div class="block1">
<!-- 本文的档头部分 -->
<h1>第九章、vim 程序编辑器</h1>
<div style="text-align:right">
	<span class="text_history">最近更新日期：2015/07/07</span>
</div>
<!-- 本文的档头部分 -->
<div class="abstract">
	<p>系统管理员的重要工作就是得要修改与设置某些重要软件的设置档，因此至少得要学会一种以上的文本接口的文书编辑器。
	在所有的 Linux distributions 上头都会有的一套文书编辑器就是 vi ，而且很多软件缺省也是使用 vi 做为他们编辑的接口，
	因此鸟哥建议您务必要学会使用 vi 这个正规的文书编辑器。此外，vim 是高端版的 vi ，
	vim 不但可以用不同颜色显示文本内容，还能够进行诸如 shell script, C program 等程序编辑功能，
	你可以将 vim 视为一种程序编辑器！鸟哥也是用 vim 编辑鸟站的网页文章呢！ ^_^</p>
</div>
<!-- 本文的链接区部分 -->
<div class="links">
<ul>
	<li><a href="0310vi.html#vi_vim">9.1 vi 与 vim</a>
	<ul>
		<li><a href="0310vi.html#vi_vim_why">9.1.1 为何要学 vim</a></li>
	</ul></li>
	<li><a href="0310vi.html#vi">9.2 vi 的使用</a>
	<ul>
		<li><a href="0310vi.html#vi_ex">9.2.1 简易运行范例</a></li>
		<li><a href="0310vi.html#vi_command">9.2.2 按键说明</a></li>
		<li><a href="0310vi.html#vi_case">9.2.3 一个案例的练习</a></li>
		<li><a href="0310vi.html#vi_temp">9.2.4 vim 的暂存盘、救援回复与开启时的警告消息</a></li>
	</ul></li>
	<li><a href="0310vi.html#vim">9.3 vim 的额外功能</a>
	<ul>
		<li><a href="0310vi.html#vim_v">9.3.1 区块选择(Visual Block)</a></li>
		<li><a href="0310vi.html#vim_files">9.3.2 多文件编辑</a></li>
		<li><a href="0310vi.html#vim_ws">9.3.3 多窗口功能</a></li>
		<li><a href="0310vi.html#vim_com">9.3.4 vim 的挑字补全功能</a></li>
		<li><a href="0310vi.html#vim_set">9.3.5 vim 环境设置与记录： ~/.vimrc, ~/.viminfo</a></li>
		<li><a href="0310vi.html#vim_fig">9.3.6 vim 常用指令示意图</a></li>
	</ul></li>
	<li><a href="0310vi.html#tips">9.4 其他 vim 使用注意事项</a>
	<ul>
		<li><a href="0310vi.html#tips_code">9.4.1 中文编码的问题</a></li>
		<li><a href="0310vi.html#tips_dos">9.4.2 DOS 与 Linux 的断行字符</a>： <a href="0310vi.html#dos2unix">dos2unix</a>,
			<a href="0310vi.html#unix2dos">unix2dos</a></li>
		<li><a href="0310vi.html#tips_translate">9.4.3 语系编码转换</a>： <a href="0310vi.html#iconv">iconv</a></li>
	</ul></li>
	<li><a href="0310vi.html#hint">9.5 重点回顾</a></li>
	<li><a href="0310vi.html#ex">9.6 本章习题</a></li>
	<li><a href="0310vi.html#reference">9.7 参考数据与延伸阅读</a></li>
</ul>
</div>
</div>
<!-- 本文的正式部分 -->
<a id="vi_vim"></a>
<div class="block1">
<h2>9.1 vi 与 vim</h2>
	<p>由前面一路走来，我们一直建议使用文本模式来处理 Linux 系统的设置问题，因为不但可以让你比较容易了解到
	Linux 的运作状况，也比较容易了解整个设置的基本精神，更能『保证』你的修改可以顺利的被运作。
	所以，<span class="text_import2">在 Linux 的系统中使用文本编辑器来编辑你的 Linux 
	参数设置档，可是一件很重要的事情呦</span>！也因此呢，系统管理员至少应该要熟悉一种文字处理器的！</p>
	<fieldset class="vbirdface"><legend style="font-family: serif; font-size:12pt; color: darkblue;">Tips</legend><img src="./vbird_files/vbird_face.gif" alt="鸟哥的图标" title="鸟哥的图标" style="float: right;">	这里要再次的强调，不同的 Linux distribution 各有其不同的附加软件，例如
	Red Hat Enterprise Linux 与 Fedora 的 ntsysv 与 setup 等，而 SuSE 则有 YAST 管理工具等等，
	因此，如果你只会使用此种类型的软件来控制你的 Linux 系统时，当接管不同的
	Linux distributions 时，呵呵！那可就苦恼了！
	</fieldset><br>
	<p>在 Linux 的世界中，绝大部分的设置档都是以 ASCII 的纯文本形态存在，因此利用简单的文本编辑软件就能够修改设置了！
	与微软的 Windows 系统不同的是，如果你用惯了 Microsoft Word 或 Corel Wordperfect 的话，那么除了 X window 
	里面的图形接口编辑程序(如 xemacs )用起来尚可应付外，在 Linux 的文本模式下，会觉得文书编辑程序都没有窗口接口来的直观与方便。</p>
	<fieldset class="vbirdface"><legend style="font-family: serif; font-size:12pt; color: darkblue;">Tips</legend><img src="./vbird_files/vbird_face.gif" alt="鸟哥的图标" title="鸟哥的图标" style="float: right;">	什么是纯文本档？其实文件记录的就是 0 与 1 ，而我们透过编码系统来将这些 0 与 1 转成我们认识的文本就是了。
	在<a href="0105computers.html#data">第零章里面的数据表示方式</a>有较多说明，请自行查阅。
	ASCII 就是其中一种广为使用的文本编码系统，在 ASCII 系统中的图标与代码可以参考 <a href="http://zh.wikipedia.org/wiki/ASCII" target="_blank">http://zh.wikipedia.org/wiki/ASCII</a>呢！
	</fieldset><br>
	<p>那么 Linux 在文本接口下的文书编辑器有哪些呢？其实有非常多喔！常常听到的就有：
	<a href="http://www.gnu.org/software/emacs/" target="_blank">emacs</a>,
	<a href="https://en.wikipedia.org/wiki/Pico_(text_editor)" target="_blank">pico</a>,
	<a href="http://sourceforge.net/projects/nano/" target="_blank">nano</a>,
	<a href="http://sourceforge.net/projects/joe-editor/" target="_blank">joe</a>,
	与 <a href="http://www.vim.org/" target="_blank">vim</a> 等等(<a href="0310vi.html#ps1">注1</a>)。
	既然有这么多文本接口的文书编辑器，那么我们为什么一定要学 vi 啊？还有那个 vim 是做啥用的？底下就来谈一谈先！</p>
	<a id="vi_vim_why"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.1.1 为何要学 vim</h2>
		<p>文书编辑器那么多，我们之前在<a href="0160startlinux.html#nano">第四章</a>也曾经介绍过那简单好用的 
		<a href="0160startlinux.html#nano">nano</a> ，既然已经学会了 
		nano ，干嘛鸟哥还一直要你学这不是很友善的 vi 呢？其实是有原因的啦！因为：</p>
		<ul class="text_import2">
		<li>所有的 Unix Like 系统都会内置 vi 文书编辑器，其他的文书编辑器则不一定会存在；</li>
		<li>很多个别软件的编辑接口都会主动调用 vi (例如未来会谈到的 <a href="0430cron.html#crontab">crontab</a>, 
		<a href="0410accountmanager.html#visudo">visudo</a>, 
		<a href="0420quota.html#edquota">edquota</a> 等指令)；</li>
		<li>vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便编程；</li>
		<li>因为程序简单，编辑速度相当快速。</li>
		</ul>
		<p>其实重点是上述的第二点，因为有太多 Linux 上面的指令都缺省使用 vi 作为数据编辑的接口，所以你必须、一定要学会 
		vi ，否则很多指令你根本就无法操作呢！这样说，有刺激到你务必要学会 vi 的热情了吗？ ^_^</p>
		<p>那么什么是 vim 呢？其实你可以将 vim 视作 vi 的高端版本，vim 可以用颜色或底线等方式来显示一些特殊的信息。
		举例来说，当你使用 vim 去编辑一个 C 编程语言的文件，或者是我们后续会谈到的
		<a href="0340bashshell-scripts.html">shell script</a> 脚本程序时，vim 会依据文件的扩展名或者是文件内的开头信息，
		判断该文件的内容而自动的调用该程序的语法判断式，再以颜色来显示代码与一般信息。也就是说，
		这个 vim 是个『程序编辑器』啦！甚至一些 Linux 基础设置档内的语法，都能够用 vim 来检查呢！
		例如我们在第七章谈到的 <a href="0230filesystem.html#fstab">/etc/fstab</a> 这个文件的内容。</p>
		<p>简单的来说， vi 是老式的文字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。
		vim 则可以说是程序开发者的一项很好用的工具，就连 vim 的官方网站 (<a href="http://www.vim.org/" target="_blank">http://www.vim.org</a>) 自己也说 vim 是一个『程序开发工具』而不是文字处理软件～^_^。
		因为 vim 里面加入了很多额外的功能，例如支持正规表示法的搜索架构、多文件编辑、区块复制等等。
		这对于我们在 Linux 上面进行一些设置档的修订工作时，是很棒的一项功能呢！</p>
		<fieldset class="vbirdface"><legend style="font-family: serif; font-size:12pt; color: darkblue;">Tips</legend><img src="./vbird_files/vbird_face.gif" alt="鸟哥的图标" title="鸟哥的图标" style="float: right;">		什么时候会使用到 vim 呢？其实鸟哥的整个网站都是在 vim 的环境下一字一字的创建起来的喔！
		早期鸟哥使用网页制作软件在编写网页，但是老是发现网页编辑软件都不怎么友善，尤其是写到 PHP 方面的代码时。
		后来就干脆不使用所见即所得的编辑软件，直接使用 vim ，然后标签 (tag) 也都自行用键盘输入！
		这样整个文件也比较干净！所以说，鸟哥我是很喜欢 vim 的啦！ ^_^
		</fieldset><br>
		<p>底下鸟哥会先就简单的 vi 做个介绍，然后再跟大家报告一下 vim 的额外功能与用法呢！</p>
	<br></div>
</div>
<a id="vi"></a>
<div class="block1">
<h2>9.2 vi 的使用</h2>
	<p>基本上 vi 共分为三种模式，分别是『<span class="text_import2">一般指令模式</span>』、『<span class="text_import2">编辑模式</span>』与『<span class="text_import2">指令列命令模式</span>』。
	这三种模式的作用分别是：</p>
	<div class="illus">
	<ul><li>一般指令模式 (command mode)</li></ul>
		<p>以 vi 打开一个文件就直接进入一般指令模式了(这是缺省的模式，也简称为一般模式)。在这个模式中，
		你可以使用『上下左右』按键来移动光标，你可以使用『删除字符』或『删除整列』来处理文件内容，
		也可以使用『复制、粘贴』来处理你的文档数据。</p>
	<ul><li>编辑模式 (insert mode)</li></ul>
		<p>在一般指令模式中可以进行删除、复制、粘贴等等的动作，但是却无法编辑文档内容的！
		要等到你按下『<span class="text_import2" style="font-family:&#39;细明体&#39;">i,
		I, o, O, a, A, r, R</span>』等任何一个字母之后才会进入编辑模式。注意了！通常在
		Linux 中，按下这些按键时，在画面的左下方会出现『 <span class="text_import2">INSERT
		或 REPLACE </span>』的字样，此时才可以进行编辑。而如果要回到一般指令模式时，
		则必须要按下『<span class="text_import1">Esc</span>』这个按键即可退出编辑模式。</p>
	<ul><li>指令列命令模式 (command-line mode)</li></ul>
		<p>在一般模式当中，输入『<span class="text_import2">
		: / ? </span>』三个中的任何一个按钮，就可以将光标移动到最底下那一列。在这个模式当中，
		可以提供你『搜索数据』的动作，而读取、存盘、大量取代字符、离开 vi 、显示行号等等的动作则是在此模式中达成的！</p>
	</div>
	<p>简单的说，我们可以将这三个模式想成底下的图标来表示：</p>
	<a id="fig9.2.1"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vi-mode.gif" alt="vi三种模式的相互关系" title="vi三种模式的相互关系" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.2.1、vi三种模式的相互关系</div>
	<p>注意到上面的图标，你会发现<span class="text_import2">一般指令模式可与编辑模式及指令列模式切换，
	但编辑模式与指令列模式之间不可互相切换</span>喔！这非常重要啦！闲话不多说，我们底下以一个简单的例子来进行说明吧！</p>
	<fieldset class="vbirdface"><legend style="font-family: serif; font-size:12pt; color: darkblue;">Tips</legend><img src="./vbird_files/vbird_face.gif" alt="鸟哥的图标" title="鸟哥的图标" style="float: right;">	过去鸟哥的前一版本中，一般指令模式被称为一般模式。但是英文版的 vi/vim 说明中，一般模式其实是『 command mode 』的意思！中文直译会变成指令模式啊！
	之所以称为指令模式，主因是我们可以在一般模式底下按下很多特殊的指令功能！例如删除、复制、区块选择等等！只是这个模式很容易跟指令列模式 (command-line) 混淆～
	所以鸟哥过去才称为一般模式而已。不过真的很容易误解啦！所以这一版开始，这一模式被鸟哥改为『一般指令模式』了！要尊重英文原文！
	</fieldset><br>
	<a id="vi_ex"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.2.1 简易运行范例</h2>
		<p>如果你想要使用 vi 来创建一个名为 welcome.txt 的文件时，你可以这样做：</p>
		<div class="illus">
		<ul><li>1. 使用『 vi filename 』进入一般指令模式</li></ul>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">/bin/vi welcome.txt</span>
<span class="term_say"># 在 CentOS 7 当中，由于一般帐号缺省 vi 已经被 vim 取代了，因此得要输入绝对路径来运行才行！</span>
</pre></td></tr></tbody></table>
		<p>直接输入『 vi 文件名』就能够进入 vi 的一般指令模式了。不过请注意，由于一般帐号缺省已经使用 vim 来取代，因此如上表所示，
		如果使用一般帐号来测试，得要使用绝对路径的方式来运行 /bin/vi 才好！另外，请注意，记得 vi 后面一定要加文件名，不管该文件名存在与否！</p>
		<p>整个画面主要分为两部份，上半部与最底下一列两者可以视为独立的。如下图 9.2.2 所示，图中那个虚线是不存在的，
		鸟哥用来说明而已啦！上半部显示的是文件的实际内容，最底下一列则是状态显示列(如下图的[New File]信息)，或者是命令下达列喔！</p>
	<a id="fig9.2.2"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vi-command.jpg" alt="用 vi 开启一个新文件" title="用 vi 开启一个新文件" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.2.2、用 vi 开启一个新文件</div>
		<p>如果你开启的文件是旧档(已经存在的文件)，则可能会出现如下的信息：</p>
	<a id="fig9.2.3"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vi-command-2.jpg" alt="用 vi 开启一个旧文件" title="用 vi 开启一个旧文件" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.2.3、用 vi 开启一个旧文件</div>
		<p>如上图 9.2.3 所示，箭头所指的那个『"/etc/man_db.conf" [readonly] 131L, 5171C』代表的是『现在开启的文件名为 /etc/man_db.conf，
		由于启动者的身份缘故，目前文件为唯读状态，且文件内有 131 列 以及具有 5171 个字符』的意思！那一列的内容并不是在文件内，而是 vi 
		显示一些信息的地方喔！此时是在一般指令模式的环境下啦。接下来开始来输入吧！</p>
		<ul><li>2. 按下 i 进入编辑模式，开始编辑文本</li></ul>
		<p>在一般指令模式之中，只要按下 i, o, a 等字符就可以进入编辑模式了！在编辑模式当中，你可以发现在左下角状态栏中会出现
		–INSERT- 的字样，那就是可以输入任意字符的提示啰！这个时候，键盘上除了
		[Esc] 这个按键之外，其他的按键都可以视作为一般的输入按钮了，所以你可以进行任何的编辑啰！</p>
	<a id="fig9.2.4"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vi-insert.jpg" alt="开始用 vi 来进行编辑" title="开始用 vi 来进行编辑" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.2.4、开始用 vi 来进行编辑</div>
		<ul><li>3. 按下 [ESC] 按钮回到一般指令模式</li></ul>
		<p>好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下
		[Esc] 这个按钮即可！马上你就会发现画面左下角的 – INSERT – 不见了！！</p>
		<ul><li>4. 进入指令列模式，文件保存并离开 vi 环境</li></ul>
		<p>OK，我们要存盘了，存盘 (write) 并离开 (quit) 的指令很简单，输入『:wq』即可存盘离开！ (注意了，按下
		: 该光标就会移动到最底下一列去！) 这时你在提示字符后面输入『 ls -l 』即可看到我们刚刚创建的
		welcome.txt 文件啦！整个图标有点像底下这样：</p>
	<a id="fig9.2.5"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vi-command-line.jpg" alt="在指令列模式进行保存及离开 vi 环境" title="在指令列模式进行保存及离开 vi 环境" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.2.5、在指令列模式进行保存及离开 vi 环境</div>
		</div>
		<p>如此一来，你的文件 welcome.txt 就已经创建起来啰！需要注意的是，如果你的文件权限不对，例如为
		-r--r--r-- 时，那么可能会无法写入，此时可以使用『强制写入』的方式吗？可以！使用『 <span class="text_import2">:wq!</span> 』
		多加一个惊叹号即可！不过，需要特别注意呦！那个是在『你的权限可以改变』的情况下才能成立的！
		关于权限的概念，请自行回去翻一下<a href="0210filepermission.html">第五章</a>的内容吧！</p>
	<br></div><br>
	<a id="vi_command"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.2.2 按键说明</h2>
		<p>除了上面简易范例的 i, [Esc], :wq 之外，其实 vi 还有非常多的按键可以使用喔！在介绍之前还是要再次强调，
		vi 的三种模式只有一般指令模式可以与编辑、指令列模式切换，编辑模式与指令列模式之间并不能切换的！
		这点在<a href="0310vi.html#fig9.2.1">图9.2.1</a>里面有介绍到，注意去看看喔！底下就来谈谈 vi 软件中会用到的按键功能吧！</p>
		<ul class="toplist"><li>第一部份：一般指令模式可用的按钮说明，光标移动、复制粘贴、搜索取代等</li></ul>
<div class="fontwidth">
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">移动光标的方法</td></tr>
<!--tr class="theader"><td colspan="2" style="color: #000088; font-size: 1.1em; text-align:center">移动光标的方法</td></tr-->
	<tr><td style="text-align:center; width: 180px">h 或 向左方向键(←)</td>
		<td>光标向左移动一个字符</td></tr>
	<tr><td style="text-align:center">j 或 向下方向键(↓)</td>
		<td>光标向下移动一个字符</td></tr>
	<tr><td style="text-align:center">k 或 向上方向键(↑)</td>
		<td>光标向上移动一个字符</td></tr>
	<tr><td style="text-align:center">l 或 向右方向键(→)</td>
		<td>光标向右移动一个字符</td></tr>
	<tr><td colspan="2">
		如果你将右手放在键盘上的话，你会发现 hjkl 是排列在一起的，因此可以使用这四个按钮来移动光标。
		如果想要进行多次移动的话，例如向下移动 30 列，可以使用 "30j" 或 "30↓" 的组合按键，
		亦即加上想要进行的次数(数字)后，按下动作即可！</td></tr>
	<tr><td style="text-align:center">[Ctrl] + [f]</td>
		<td>屏幕『向下』移动一页，相当于 [Page Down]按键
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">[Ctrl] + [b]</td>
		<td>屏幕『向上』移动一页，相当于 [Page Up] 按键
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">[Ctrl] + [d]</td>
		<td>屏幕『向下』移动半页</td></tr>
	<tr><td style="text-align:center">[Ctrl] + [u]</td>
		<td>屏幕『向上』移动半页</td></tr>
	<tr><td style="text-align:center">+</td>
		<td>光标移动到非空白字符的下一列</td></tr>
	<tr><td style="text-align:center">-</td>
		<td>光标移动到非空白字符的上一列</td></tr>
	<tr><td style="text-align:center">n&lt;space&gt;</td>
		<td>那个 n 表示『数字』，例如 20 。按下数字后再按空白键，光标会向右移动这一列的 n
		个字符。例如 20&lt;space&gt; 则光标会向后面移动 20 个字符距离。</td></tr>
	<tr><td style="text-align:center">0 或功能键[Home]</td>
		<td>这是数字『 0 』：移动到这一列的最前面字符处
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">$ 或功能键[End]</td>
		<td>移动到这一列的最后面字符处(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">H</td>
		<td>光标移动到这个屏幕的最上方那一列的第一个字符</td></tr>
	<tr><td style="text-align:center">M</td>
		<td>光标移动到这个屏幕的中央那一列的第一个字符</td></tr>
	<tr><td style="text-align:center">L</td>
		<td>光标移动到这个屏幕的最下方那一列的第一个字符</td></tr>
	<tr><td style="text-align:center">G</td>
		<td>移动到这个文件的最后一列(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">nG</td>
		<td>n 为数字。移动到这个文件的第 n 列。例如 20G 则会移动到这个文件的第 20 
		列(可配合 :set nu)</td></tr>
	<tr><td style="text-align:center">gg</td>
		<td>移动到这个文件的第一列，相当于 1G 啊！
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">n&lt;Enter&gt;</td>
		<td>n 为数字。光标向下移动 n 列(<span class="text_import2">常用</span>)</td></tr>
<tr class="theader"><td colspan="2" class="tcenter">搜索与取代</td></tr>
	<tr><td style="text-align:center">/word</td>
		<td>向光标之下寻找一个名称为 word 的字符串。例如要在文件内搜索 vbird 
		这个字符串，就输入 /vbird 即可！
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">?word</td>
		<td>向光标之上寻找一个字符串名称为 word 的字符串。</td></tr>
	<tr><td style="text-align:center">n</td>
		<td>这个 n 是英文按键。代表『<u>重复前一个搜索的动作</u>』。举例来说，
		如果刚刚我们运行 /vbird 去向下搜索 vbird 这个字符串，则按下 n 后，会向下继续搜索下一个名称为 vbird 
		的字符串。如果是运行 ?vbird 的话，那么按下 n 则会向上继续搜索名称为 vbird 的字符串！</td></tr>
	<tr><td style="text-align:center">N</td>
		<td>这个 N 是英文按键。与 n 刚好相反，为『反向』进行前一个搜索动作。
		例如 /vbird 后，按下 N 则表示『向上』搜索 vbird 。</td></tr>
	<tr><td colspan="2">
		使用 /word 配合 n 及 N 是非常有帮助的！可以让你重复的找到一些你搜索的关键字！
	</td></tr>
	<tr><td style="text-align:center">:n1,n2s/word1/word2/g</td>
		<td>n1 与 n2 为数字。在第 n1 与 n2 列之间寻找 word1 这个字符串，并将该字符串取代为
		word2 ！举例来说，在 100 到 200 列之间搜索 vbird 并取代为 VBIRD 则：<br>
		『:100,200s/vbird/VBIRD/g』。(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">:1,$s/word1/word2/g</td>
		<td>从第一列到最后一列寻找 word1 字符串，并将该字符串取代为
		word2 ！(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">:1,$s/word1/word2/gc</td>
		<td>从第一列到最后一列寻找 word1 字符串，并将该字符串取代为
		word2 ！且在取代前显示提示字符给用户确认 (confirm)
		是否需要取代！(<span class="text_import2">常用</span>)</td></tr>
<tr class="theader"><td colspan="2" class="tcenter">删除、复制与粘贴</td></tr>
	<tr><td style="text-align:center">x, X</td>
		<td>在一列字当中，x 为向后删除一个字符 (相当于 [del] 按键)，
		 X 为向前删除一个字符(相当于 [backspace] 亦即是倒退键)
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">nx</td>
		<td>n 为数字，连续向后删除 n 个字符。举例来说，我要连续删除 10 个字符，
		『10x』。</td></tr>
	<tr><td style="text-align:center">dd</td>
		<td>删除光标所在的那一整列(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">ndd</td>
		<td>n 为数字。删除光标所在的向下 n 列，例如 20dd 则是删除 20 列
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">d1G</td>
		<td>删除光标所在到第一列的所有数据</td></tr>
	<tr><td style="text-align:center">dG</td>
		<td>删除光标所在到最后一列的所有数据</td></tr>
	<tr><td style="text-align:center">d$</td>
		<td>删除光标所在处，到该列的最后一个字符</td></tr>
	<tr><td style="text-align:center">d0</td>
		<td>那个是数字的 0 ，删除光标所在处，到该列的最前面一个字符</td></tr>
	<tr><td style="text-align:center">yy</td>
		<td>复制光标所在的那一列(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">nyy</td>
		<td>n 为数字。复制光标所在的向下 n 列，例如 20yy 则是复制 20
		列(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">y1G</td>
		<td>复制光标所在列到第一列的所有数据</td></tr>
	<tr><td style="text-align:center">yG</td>
		<td>复制光标所在列到最后一列的所有数据</td></tr>
	<tr><td style="text-align:center">y0</td>
		<td>复制光标所在的那个字符到该列行首的所有数据</td></tr>
	<tr><td style="text-align:center">y$</td>
		<td>复制光标所在的那个字符到该列行尾的所有数据</td></tr>
	<tr><td style="text-align:center">p, P</td>
		<td>p 为将已复制的数据在光标下一列粘贴，P 则为贴在光标上一列！
		举例来说，我目前光标在第 20 列，且已经复制了 10 列数据。则按下 p 后，
		那 10 列数据会贴在原本的 20 列之后，亦即由 21 列开始贴。但如果是按下 P 呢？
		那么原本的第 20 列会被推到变成 30 列。
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">J</td>
		<td>将光标所在列与下一列的数据结合成同一列</td></tr>
	<tr><td style="text-align:center">c</td>
		<td>重复删除多个数据，例如向下删除 10 列，[ 10cj ]</td></tr>
	<tr><td style="text-align:center">u</td>
		<td>复原前一个动作。(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">[Ctrl]+r</td>
		<td>重做上一个动作。(<span class="text_import2">常用</span>)</td></tr>
	<tr><td colspan="2">这个 u 与 [Ctrl]+r 是很常用的指令！一个是复原，另一个则是重做一次～
		利用这两个功能按键，你的编辑，嘿嘿！很快乐的啦！</td></tr>
	<tr><td style="text-align:center">.</td>
		<td>不要怀疑！这就是小数点！意思是重复前一个动作的意思。
		如果你想要重复删除、重复粘贴等等动作，按下小数点『.』就好了！
		(<span class="text_import2">常用</span>)</td></tr>
	</tbody></table>
		<ul class="toplist"><li>第二部份：一般指令模式切换到编辑模式的可用的按钮说明</li></ul>
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">进入插入或取代的编辑模式</td></tr>
	<tr><td style="text-align:center; width: 120px">i, I</td>
		<td>进入插入模式(Insert mode)：<br>
		i 为『从目前光标所在处插入』， I 为『在目前所在列的第一个非空白字符处开始插入』。
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">a, A</td>
		<td>进入插入模式(Insert mode)：<br>
		a 为『从目前光标所在的下一个字符处开始插入』， A
		为『从光标所在列的最后一个字符处开始插入』。(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">o, O</td>
		<td>进入插入模式(Insert mode)：<br>
		这是英文本母 o 的大小写。o 为『在目前光标所在的下一列处插入新的一列』；
		O 为在目前光标所在处的上一列插入新的一列！(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">r, R</td>
		<td>进入取代模式(Replace mode)：<br>
		r 只会取代光标所在的那一个字符一次；R会一直取代光标所在的文本，直到按下
		ESC 为止；(<span class="text_import2">常用</span>)</td></tr>
	<tr><td colspan="2">上面这些按键中，在 vi 画面的左下角处会出现『--INSERT--』或『--REPLACE--』的字样。
		由名称就知道该动作了吧！！特别注意的是，我们上面也提过了，你想要在文件里面输入字符时，
		一定要在左下角处看到 INSERT 或 REPLACE 才能输入喔！</td></tr>
	<tr><td style="text-align:center">[Esc]</td>
		<td>退出编辑模式，回到一般指令模式中(<span class="text_import2">常用</span>)</td></tr>
	</tbody></table>
		<ul class="toplist"><li>第三部份：一般指令模式切换到指令列模式的可用按钮说明</li></ul>
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">指令列模式的保存、离开等指令</td></tr>
	<tr><td style="text-align:center; width: 160px">:w</td>
		<td>将编辑的数据写入硬盘文件中(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">:w!</td>
		<td>若文件属性为『唯读』时，强制写入该文件。不过，到底能不能写入，
		还是跟你对该文件的文件权限有关啊！</td></tr>
	<tr><td style="text-align:center">:q</td>
		<td>离开 vi (<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">:q!</td>
		<td>若曾修改过文件，又不想保存，使用 ! 为强制离开不保存文件。</td></tr>
	<tr><td colspan="2">注意一下啊，那个惊叹号 (!) 在 vi 当中，常常具有『强制』的意思～</td></tr>
	<tr><td style="text-align:center">:wq</td>
		<td>保存后离开，若为 :wq! 则为强制保存后离开
		(<span class="text_import2">常用</span>)</td></tr>
	<tr><td style="text-align:center">ZZ</td>
		<td>这是大写的 Z 喔！若文件没有更动，则不保存离开，若文件已经被更动过，则保存后离开！</td></tr>
	<tr><td style="text-align:center">:w [filename]</td>
		<td>将编辑的数据保存成另一个文件（类似另存新档）</td></tr>
	<tr><td style="text-align:center">:r [filename]</td>
		<td>在编辑的数据中，读入另一个文件的数据。亦即将 『filename』
		这个文件内容加到光标所在列后面</td></tr>
	<tr><td style="text-align:center">:n1,n2 w [filename]</td>
		<td>将 n1 到 n2 的内容保存成 filename 这个文件。</td></tr>
	<tr><td style="text-align:center">:! command</td>
		<td>暂时离开 vi 到指令列模式下运行 command 的显示结果！例如<br>
		『:! ls /home』即可在 vi 当中察看 /home 底下以 ls 输出的文件信息！</td></tr>
<tr class="theader"><td colspan="2" class="tcenter">vim 环境的变更</td></tr>
	<tr><td style="text-align:center">:set nu</td>
		<td>显示行号，设置之后，会在每一列的前缀显示该列的行号</td></tr>
	<tr><td style="text-align:center">:set nonu</td>
		<td>与 set nu 相反，为取消行号！</td></tr>
</tbody></table>
</div>
		<p>特别注意，<span class="text_import2">在 vi 中，『数字』是很有意义的！数字通常代表重复做几次的意思！
		也有可能是代表去到第几个什么什么的意思。</span>举例来说，要删除 50 列，则是用 『50dd』 对吧！
		数字加在动作之前～那我要向下移动 20 列呢？那就是『20j』或者是『20↓』即可。</p>
		<p>OK！会这些指令就已经很厉害了，因为常用到的指令也只有不到一半！通常 vi
		的指令除了上面鸟哥注明的常用的几个外，其他是不用背的，你可以做一张简单的指令表在你的屏幕墙上，
		一有疑问可以马上的查找呦！这也是当初鸟哥使用 vim 的方法啦！</p>
	<br></div><br>
	<a id="vi_case"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.2.3 一个案例练习</h2>
		<p>来来来！赶紧测试一下你是否已经熟悉 vi 这个指令呢？请依照底下的需求进行指令动作。
		(底下的操作为使用 CentOS 7.1 中的 man_db.conf 来做练习的，该文件你可以在这里下载： 
		<a href="0310vi/man_db.conf">0310vi/man_db.conf</a>。)
		看看你的显示结果与鸟哥的结果是否相同啊？</p>
		<ol>
		<li>请在 /tmp 这个目录下创建一个名为 vitest 的目录；</li>
		<li>进入 vitest 这个目录当中；</li>
		<li>将 /etc/man_db.conf 复制到本目录底下(或由上述的链接下载 <a href="0310vi/man_db.conf">man_db.conf</a> 文件)；</li>
		<li>使用 vi 开启本目录下的 man_db.conf 这个文件；</li>
		<li>在 vi 中设置一下行号；</li>
		<li>移动到第 43 列，向右移动 59 个字符，请问你看到的小括号内是哪个文本？</li>
		<li>移动到第一列，并且向下搜索一下『 gzip 』这个字符串，请问他在第几列？</li>
		<li>接着下来，我要将 29 到 41 列之间的『小写 man 字符串』改为『大写 MAN 
			字符串』，并且一个一个挑选是否需要修改，如何下达指令？如果在挑选过程中一直按『y』，
			结果会在最后一列出现改变了几个 man 呢？</li>
		<li>修改完之后，突然反悔了，要全部复原，有哪些方法？</li>
		<li>我要复制 66 到 71 这 6 列的内容(含有MANDB_MAP)，并且贴到最后一列之后；</li>
		<li>113 到 128 列之间的开头为 # 符号的注解数据我不要了，要如何删除？</li>
		<li>将这个文件另存成一个 man.test.config 的文件名；</li>
		<li>去到第 25 列，并且删除 15 个字符，结果出现的第一个单字是什么？</li>
		<li>在第一列添加一列，该列内容输入『I am a student...』；</li>
		<li>保存后离开吧！</li>
		</ol>
		<p>整个步骤可以如下显示：</p>
		<ol class="text_import2" style="font-family: &#39;细明体&#39;">
		<li>『mkdir /tmp/vitest』</li>
		<li>『cd /tmp/vitest』</li>
		<li>『cp /etc/man_db.conf .』</li>
		<li>『/bin/vi man_db.conf』</li>
		<li>『:set nu』然后你会在画面中看到左侧出现数字即为行号。</li>
		<li>先按下『43G』再按下『59→』会看到『 as 』这个单字在小括号内；</li>
		<li>先运行『1G』或『gg』后，直接输入『/gzip』，则会去到第 93 列才对！</li>
		<li>直接下达『 :29,41s/man/MAN/gc 』即可！若一直按『y』最终会出现『在 13 列内置换 13 个字符串』的说明。</li>
		<li>(1)简单的方法可以一直按『 u 』回复到原始状态，(2)使用不保存离开『 :q! 』之后，再重新读取一次该文件；</li>
		<li>『66G』 然后再『 6yy 』之后最后一列会出现『复制6列』之类的说明字样。
			按下『 G 』到最后一列，再给他『 p 』粘贴6列！</li>
		<li>因为 113~128 共 16 列，因此『 113G 』→『
 16dd 』就能删除 16 列，此时你会发现光标所在 113 列的地方变成 『 # Flags. 』 开头啰</li>
		<li>『 :w man.test.config 』，你会发现最后一列出现 "man.test.config" [New].. 的字样。</li>
		<li>『25G』 之后，再给他『 15x 』即可删除 15 个字符，出现『 tree 』的字样；</li>
		<li>先『 1G 』去到第一列，然后按下大写的『 O 』便添加一列且在插入模式；开始输入『I am a student...』后，
			按下[Esc]回到一般指令模式等待后续工作；</li>
		<li>『:wq』</li>
		</ol>
		<p>如果你的结果都可以查的到，那么 vi 的使用上面应该没有太大的问题啦！剩下的问题会是在…打字练习…。</p>
	<br></div><br>
	<a id="vi_temp"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.2.4 vim 的暂存盘、救援回复与开启时的警告消息</h2>
		<p>在目前主要的文书编辑软件都会有『回复』的功能，亦即当你的系统因为某些原因而导致类似当机的情况时，
		还可以透过某些特别的机制来让你将之前未保存的数据『救』回来！这就是鸟哥这里所谓的『回复』功能啦！
		那么 vim 有没有回复功能呢？有的！ vim 就是透过『暂存盘』来救援的啦！</p>
		<p>当我们在使用 vim 编辑时， vim 会在与被编辑的文件的目录下，<span class="text_import2">再创建一个名为 .filename.swp 的文件</span>。
		比如说我们在上一个小节谈到的编辑 /tmp/vitest/man_db.conf 这个文件时， vim 会主动的创建 /tmp/vitest/.man_db.conf.swp
		的暂存盘，你对 man_db.conf 做的动作就会被记录到这个 .man_db.conf.swp 当中喔！如果你的系统因为某些原因断线了，
		导致你编辑的文件还没有保存，这个时候 .man_db.conf.swp 就能够发挥救援的功能了！我们来测试一下吧！
		底下的练习有些部分的指令我们尚未谈到，没关系，你先照着做，后续再回来了解啰！</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">cd /tmp/vitest</span>
[dmtsai@study vitest]$ <span class="term_command">vim man_db.conf</span>
<span class="term_say"># 此时会进入到 vim 的画面，请在 vim 的一般指令模式下按下『 [ctrl]-z 』的组合键</span>
[1]+  Stopped             vim man_db.conf  <span class="term_note">&lt;==按下 [ctrl]-z 会告诉你这个消息</span>
</pre></td></tr></tbody></table>
		<p>当我们在 vim 的一般指令模式下按下 [ctrl]-z 的组合按键时，你的 vim 会被丢到背景去运行！
		这部份的功能我们会在<a href="0440processcontrol.html#background">第十六章的进程管理</a>当中谈到，
		你这里先知道一下即可。回到命令提示字符后，接下来我们来仿真将 vim 的工作不正常的中断吧！</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study vitest]$ <span class="term_command">ls -al</span>
drwxrwxr-x.  2 dmtsai dmtsai    69 Jul  6 23:54 .
drwxrwxrwt. 17 root   root    4096 Jul  6 23:53 ..
-rw-r--r--.  1 dmtsai dmtsai  4850 Jul  6 23:47 man_db.conf
-rw-r--r--.  1 dmtsai dmtsai 16384 Jul  6 23:54 <span class="term_write">.man_db.conf.swp</span>  <span class="term_note">&lt;==就是他，暂存盘</span>
-rw-rw-r--.  1 dmtsai dmtsai  5442 Jul  6 23:35 man.test.config
[dmtsai@study vitest]$ <span class="term_command">kill -9 %1</span> <span class="term_note">&lt;==这里仿真断线停止 vim 工作</span>
[dmtsai@study vitest]$ <span class="term_command">ls -al .man_db.conf.swp</span>
-rw-r--r--. 1 dmtsai dmtsai 16384 Jul  6 23:54 .man_db.conf.swp  <span class="term_note">&lt;==暂存盘还是会存在！</span>
</pre></td></tr></tbody></table>
		<p>那个 kill 可以仿真将系统的 vim 工作删除的情况，你可以假装当机了啦！
		<span class="text_import2">由于 vim 的工作被不正常的中断，导致暂存盘无法借由正常流程来结束，
		所以暂存盘就不会消失，而继续保留下来。</span>此时如果你继续编辑那个 man_db.conf ，会出现什么情况呢？
		会出现如下所示的状态喔：</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study vitest]$ <span class="term_command">vim man_db.conf</span>
E325: ATTENTION  <span class="term_note">&lt;==错误代码</span>
Found a swap file by the name "<span class="term_write">.man_db.conf.swp</span>"  <span class="term_note">&lt;==底下数列说明有暂存盘的存在</span>
          owned by: dmtsai   dated: Mon Jul  6 23:54:16 2015
         file name: /tmp/vitest/man_db.conf  <span class="term_note">&lt;==这个暂存盘属于哪个实际的文件？</span>
          modified: no
         user name: dmtsai   host name: study.centos.vbird
        process ID: 31851
While opening file "man_db.conf"
             dated: Mon Jul  6 23:47:21 2015
<span class="term_note">底下说明可能发生这个错误的两个主要原因与解决方案！</span>
(1) Another program may be editing the same file.  If this is the case,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or continue with caution.
(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r man_db.conf"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file ".man_db.conf.swp"
    to avoid this message.
Swap file ".man_db.conf.swp" already exists! <span class="term_note">底下说明你可进行的动作</span>
<span style="text-decoration: underline">[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: <span class="term_white"> </span></span>
</pre></td></tr></tbody></table>
		<p>由于暂存盘存在的关系，因此 vim 会主动的判断你的这个文件可能有些问题，在上面的图标中 vim 
		提示两点主要的问题与解决方案，分别是这样的：</p>
		<ul>
		<li>问题一：可能有其他人或程序同时在编辑这个文件：<br><br>
		由于 Linux 是多人多任务的环境，因此很可能有很多人同时在编辑同一个文件。如果在多人共同编辑的情况下，
		万一大家同时保存，那么这个文件的内容将会变的乱七八糟！为了避免这个问题，因此 vim 会出现这个警告窗口！
		解决的方法则是：<br><br>
		<ul><li><span class="text_import2">找到另外那个程序或人员，请他将该 vim 的工作结束，然后你再继续处理。</span>
		<br><br></li>
		<li>如果你只是要看该文件的内容并不会有任何修改编辑的行为，那么<span class="text_import2">可以选择开启成为唯读(O)文件，
		亦即上述画面反白部分输入英文『 o 』即可</span>，其实就是 [O]pen Read-Only 的选项啦！
		</li></ul><br></li>
		<li>问题二：在前一个 vim 的环境中，可能因为某些不知名原因导致 vim 中断 (crashed)：<br><br>
		这就是常见的不正常结束 vim 产生的后果。解决方案依据不同的情况而不同喔！常见的处理方法为：<br><br>
		<ul>
		<li>如果你之前的 vim 处理动作尚未保存，此时你应该要按下『R』，亦即使用 (R)ecover 的项目，
		此时 vim 会加载 .man_db.conf.swp 的内容，让你自己来决定要不要保存！这样就能够救回来你之前未保存的工作。
		不过那个 .man_db.conf.swp 并不会在你结束 vim 后自动删除，所以<span class="text_import2">你离开 vim 
		后还得要自行删除 .man_db.conf.swp 才能避免每次打开这个文件都会出现这样的警告</span>！<br><br></li>
		<li>如果你确定这个暂存盘是没有用的，那么你可以直接按下『D』删除掉这个暂存盘，亦即 (D)elete it 这个项目即可。
		此时 vim 会加载 man_db.conf ，并且将旧的 .man_db.conf.swp 删除后，创建这次会使用的新的 .man_db.conf.swp 喔！</li>
		</ul><br></li>
		</ul>
		<p>至于这个发现暂存盘警告消息的画面中，有出现六个可用按钮，各按钮的说明如下：</p>
		<ul>
		<li><span class="text_import2">[O]pen Read-Only：</span>打开此文件成为唯读档，
		可以用在你只是想要查阅该文件内容并不想要进行编辑行为时。一般来说，在上课时，如果你是登录到同学的电脑去看他的设置档，
		结果发现其实同学他自己也在编辑时，可以使用这个模式；<br><br></li>
		<li><span class="text_import2">(E)dit anyway</span>：还是用正常的方式打开你要编辑的那个文件，
		并不会加载暂存盘的内容。不过很容易出现两个用户互相改变对方的文件等问题！不好不好！<br><br></li>
		<li><span class="text_import2">(R)ecover</span>：就是加载暂存盘的内容，用在你要救回之前未保存的工作。
		不过当你救回来并且保存离开 vim 后，还是要手动自行删除那个暂存盘喔！<br><br></li>
		<li><span class="text_import2">(D)elete it</span>：你确定那个暂存盘是无用的！那么开启文件前会先将这个暂存盘删除！
		这个动作其实是比较常做的！因为你可能不确定这个暂存盘是怎么来的，所以就删除掉他吧！哈哈！<br><br></li>
		<li><span class="text_import2">(Q)uit</span>：按下 q 就离开 vim ，不会进行任何动作回到命令提示字符。<br><br></li>
		<li><span class="text_import2">(A)bort</span>：忽略这个编辑行为，感觉上与 quit 非常类似！
		也会送你回到命令提示字符就是啰！</li>
		</ul>
	<br></div>
</div>
<a id="vim"></a>
<div class="block1">
<h2>9.3 vim 的额外功能</h2>
	<p>其实，目前大部分的 distributions 都以 vim 取代 vi 的功能了！如果你使用 vi 后，却看到画面的右下角有显示目前光标所在的行列号码，那么你的 
	vi 已经被 vim 所取代啰～为什么要用 vim 呢？因为 vim 具有颜色显示的功能，并且还支持许多的程序语法 (syntax)，
	因此，当你使用 vim 编辑程序时 (不论是 C 语言，还是 shell script )，我们的 vim 将可帮你直接进行『程序调试 (debug)』的功能！真的很不赖吧！^_^</p>
	<p>如果你在文本模式下，输入 alias 时，出现这样的画面：</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">alias</span>
<span class="term_say">....其他省略....</span>
alias vi='vim'  <span class="term_note">&lt;==重点在这列啊！</span>
</pre></td></tr></tbody></table>
	<p>这表示当你使用 vi 这个指令时，其实就是运行 vim 啦！如果你没有这一列，那么你就必须要使用 vim filename 
	来启动 vim 啰！基本上， vim 的一般用法与 vi 完全一模一样～没有不同啦！那么我们就来看看 vim 
	的画面是怎样啰！假设我想要编辑 /etc/services ，则输入『<span class="text_import2">vim /etc/services</span>』看看吧：</p>
	<a id="fig9.3.1"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-01.jpg" alt="使用 vim 编辑系统设置档的示范" title="使用 vim 编辑系统设置档的示范" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.1、使用 vim 编辑系统设置档的示范</div>
	<p>上面是 vim 的画面示意图，在这个画面中有几点特色要说明喔：</p>
	<ol>
	<li>由于 /etc/services 是系统规划的设置档，因此 vim 会进行语法检验，所以你会看到画面中内部主要为深蓝色，
		且深蓝色那一列是以注解符号 (#) 为开头；</li>
	<li>画面中的最底下一列，在左边显示该文件的属性，包括唯读档、内容共有 11176 列与 670293 个字符；</li>
	<li>最底下一列的右边出现的 1,1 表示光标所在为第一列, 第一个字符位置之意(请看上图中的光标所在)；</li>
	</ol>
	<p>所以，如果你向下移动到其他位置时，出现的非注解的数据就会有点像这样：</p>
	<a id="fig9.3.2"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-02.jpg" alt="使用 vim 编辑系统设置档的示范" title="使用 vim 编辑系统设置档的示范" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.2、使用 vim 编辑系统设置档的示范</div>
	<p>看到了喔！除了注解之外，其他的列就会有特别的颜色显示呢！可以避免你打错字啊！而且，
	最右下角的 1% 代表目前这个画面占整体文件的 1% 之意！这样瞭乎？</p>
	<a id="vim_v"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.3.1 区块选择(Visual Block)</h2>
		<p>刚刚我们提到的简单的 vi 操作过程中，几乎提到的都是以列为单位的操作。那么如果我想要搞定的是一个区块范围呢？
		举例来说，像底下这种格式的文件：</p>
<table class="term"><tbody><tr><td class="term"><pre><span class="term_write">192.168.1.1    host1.class.net
192.168.1.2    host2.class.net
192.168.1.3    host3.class.net
192.168.1.4    host4.class.net</span>
<span class="term_say">.....中间省略......</span>
</pre></td></tr></tbody></table>
		<p>这个文件我将他放置到 <a href="0310vi/hosts">0310vi/hosts</a> 
		，你可以自行下载来看一看这个文件啊！现在我们来玩一玩这个文件吧！假设我想要将 host1, host2... 等等复制起来，
		并且加到每一列的后面，亦即每一列的结果要是『 192.168.1.2   host2.class.net  host2 』这样的情况时，
		在传统或现代的窗口型编辑器似乎不容易达到这个需求，但是咱们的 vim 是办的到的喔！那就使用区块选择
		(Visual Block) 吧！当我们按下 v 或者 V 或者 [Ctrl]+v 时，
		这个时候光标移动过的地方就会开始反白，这三个按键的意义分别是：</p>
<div class="fontwidth">
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">区块选择的按键意义</td></tr>
	<tr><td style="text-align:center">v</td><td>字符选择，会将光标经过的地方反白选择！</td></tr>
	<tr><td style="text-align:center">V</td><td>列选择，会将光标经过的列反白选择！</td></tr>
	<tr><td style="text-align:center">[Ctrl]+v</td><td>区块选择，可以用长方形的方式选择数据</td></tr>
	<tr><td style="text-align:center">y</td><td>将反白的地方复制起来</td></tr>
	<tr><td style="text-align:center">d</td><td>将反白的地方删除掉</td></tr>
	<tr><td style="text-align:center">p</td><td>将刚刚复制的区块，在光标所在处粘贴！</td></tr>
</tbody></table>
</div>
		<p>来实际进行我们需要的动作吧！就是将 host 再加到每一列的最后面，你可以这样做：</p>
		<ol>
		<li>使用 vim hosts 来开启该文件，记得该文件请由<a href="0310vi/hosts">上述的链接</a>下载先！</li>
		<li>将光标移动到第一列的 host 那个 h 上头，然后按下 [ctrl]-v ，左下角出现区块示意字样：<br><br>
	<a id="fig9.3.3"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-block-01.jpg" alt="vim 的区块选择、复制、粘贴等操作功能" title="vim 的区块选择、复制、粘贴等操作功能" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.3、vim 的区块选择、复制、粘贴等功能操作</div>
		</li><li>将光标移动到最底部，此时光标移动过的区域会反白！如下图所示：<br><br>
	<a id="fig9.3.4"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-block-02.jpg" alt="vim 的区块选择、复制、粘贴等操作功能" title="vim 的区块选择、复制、粘贴等操作功能" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.4、vim 的区块选择、复制、粘贴等功能操作</div>
		</li><li>此时你可以按下『 y 』来进行复制，当你按下 y 之后，反白的区块就会消失不见啰！</li>
		<li>最后，将光标移动到第一列的最右边，并且再用编辑模式向右按两个空白键，回到一般指令模式后，
		再按下『 p 』后，你会发现很有趣！如下图所示：<br><br>
	<a id="fig9.3.5"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-block-03.jpg" alt="vim 的区块选择、复制、粘贴等操作功能" title="vim 的区块选择、复制、粘贴等操作功能" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.5、vim 的区块选择、复制、粘贴等功能操作</div></li>
		</ol>
		<p>透过上述的功能，你可以复制一个区块，并且是贴在某个『区块的范围』内，而不是以列为单位来处理你的整份文档喔！
		鸟哥个人是觉得这玩意儿非常的有帮助啦！至少在进行排列整齐的文本文件中复制/删除区块时，会是一个非常棒的功能！</p>
	<br></div><br>
	<a id="vim_files"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.3.2 多文件编辑</h2>
		<p>假设一个例子，你想要将刚刚我们的 hosts 内的 IP 复制到你的 /etc/hosts 这个文件去，
		那么该如何编辑？我们知道在 vi 内可以使用 :r filename 来读入某个文件的内容，
		不过，这样毕竟是将整个文件读入啊！如果我只是想要部分内容呢？呵呵！这个时候多文件同时编辑就很有用了。
		我们可以使用 vim 后面同时接好几个文件来同时开启喔！相关的按键有：</p>
<div class="fontwidth">
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">多文件编辑的按键</td></tr>
	<tr><td style="text-align:center">:n</td><td>编辑下一个文件</td></tr>
	<tr><td style="text-align:center">:N</td><td>编辑上一个文件</td></tr>
	<tr><td style="text-align:center">:files</td><td>列出目前这个 vim 的开启的所有文件</td></tr>
</tbody></table>
</div>
		<p>在过去，鸟哥想要将 A 文件内的十条消息『移动』到 B 文件去，通常要开两个 vim 窗口来复制，
		偏偏每个 vim 都是独立的，因此并没有办法在 A 文件下达『 nyy 』再跑到 B 文件去『 p 』啦！
		在这种情况下最常用的方法就是透过鼠标圈选，
		复制后粘贴。不过这样一来还是有问题，因为鸟哥超级喜欢使用 [Tab] 按键进行编排对齐动作，
		透过鼠标却会将 [Tab] 转成空白键，这样内容就不一样了！此时这个多文件编辑就派上用场了！</p>
		<p>现在你可以做一下练习看看说！假设你要将刚刚鸟哥提供的 hosts 内的前四列 IP 数据复制到你的
		/etc/hosts 文件内，那可以怎么进行呢？可以这样啊：</p>
		<ol>
		<li>透过『 <span class="text_import2">vim hosts /etc/hosts</span> 』指令来使用一个 vim 开启两个文件；</li>
		<li>在 vim 中先使用『 :files 』察看一下编辑的文件数据有啥？结果如下所示。
		至于下图的最后一列显示的是『按下任意键』就会回到 vim 的一般指令模式中！<br><br>
	<a id="fig9.3.6"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/vim-files-01.jpg" alt="vim 的多文件编辑中，查看同时编辑的文件数据" title="vim 的多文件编辑中，查看同时编辑的文件数据" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.6、vim 的多文件编辑中，查看同时编辑的文件数据</div>
		</li><li>在第一列输入『 4yy 』复制四列；</li>
		<li>在 vim 的环境下输入『 :n 』会来到第二个编辑的文件，亦即 /etc/hosts 内；</li>
		<li>在 /etc/hosts 下按『 G 』到最后一列，再输入『 p 』粘贴；</li>
		<li>按下多次的『 u 』来还原原本的文件数据；</li>
		<li>最终按下『 :q 』来离开 vim 的多文件编辑吧！</li>
		</ol>
		<p>看到了吧？利用多文件编辑的功能，可以让你很快速的就将需要的数据复制到正确的文件内。
		当然啰，这个功能也可以利用窗口接口来达到，那就是底下要提到的多窗口功能。</p>
	<br></div><br>
	<a id="vim_ws"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.3.3 多窗口功能</h2>
		<p>在开始这个小节前，先来想像两个情况：</p>
		<ul>
		<li>当我有一个文件非常的大，我查阅到后面的数据时，想要『对照』前面的数据，
			是否需要使用 [ctrl]+f 与 [ctrl]+b (或 pageup, pagedown 功能键) 来跑前跑后查阅？<br><br></li>
		<li>我有两个需要对照着看的文件，不想使用前一小节提到的多文件编辑功能；</li>
		</ul>
		<p>在一般窗口接口下的编辑软件大多有『分割窗口』或者是『冻结窗口』的功能来将一个文件分割成多个窗口的展现，
		那么 vim 能不能达到这个功能啊？可以啊！但是如何分割窗口并放入文件呢？
		很简单啊！在指令列模式输入『:sp {filename}』即可！那个 filename 可有可无，
		<span class="text_import2">如果想要在新窗口启动另一个文件，就加入文件名，否则仅输入 :sp 时，
		出现的则是同一个文件在两个窗口间</span>！</p>
		<p>让我们来测试一下，你先使用『 vim /etc/man_db.conf 』打开这个文件，然后『 1G 』去到第一列，之后输入『 :sp 』
		再次的打开这个文件一次，然后再输入『 G 』，结果会变成底下这样喔：</p>
	<a id="fig9.3.7"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-window-01.jpg" alt="vim 的窗口分割示意图" title="vim 的窗口分割示意图" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.7、vim 的窗口分割示意图</div>
		<p>万一你再输入『 :sp /etc/hosts 』时，就会变成下图这样喔：</p>
	<a id="fig9.3.8"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-window-02.jpg" alt="vim 的窗口分割示意图" title="vim 的窗口分割示意图" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.8、vim 的窗口分割示意图</div>
		<p>怎样？帅吧！两个文件同时在一个屏幕上面显示，你还可以利用『[ctrl]+w+↑』及『[ctrl]+w+↓』
		在两个窗口之间移动呢！这样的话，复制啊、查阅啊等等的，就变的很简单啰～
		分割窗口的相关指令功能有很多，不过你只要记得这几个就好了：</p>
<div class="fontwidth">
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">多窗口情况下的按键功能</td></tr>
	<tr><td style="text-align:center; width: 150px">:sp [filename]</td><td>开启一个新窗口，如果有加 filename，
		表示在新窗口开启一个新文件，否则表示两个窗口为同一个文件内容(同步显示)。</td></tr>
	<tr><td style="text-align:center">[ctrl]+w+ j<br>[ctrl]+w+↓</td><td>按键的按法是：先按下 [ctrl] 不放，
		再按下 w 后放开所有的按键，然后再按下 j (或向下方向键)，则光标可移动到下方的窗口。</td></tr>
	<tr><td style="text-align:center">[ctrl]+w+ k<br>[ctrl]+w+↑</td><td>同上，不过光标移动到上面的窗口。</td></tr>
	<tr><td style="text-align:center">[ctrl]+w+ q</td><td>其实就是 :q 结束离开啦！
		举例来说，如果我想要结束下方的窗口，那么利用 [ctrl]+w+↓ 移动到下方窗口后，按下 :q 即可离开，
		也可以按下 [ctrl]+w+q 啊！</td></tr>
</tbody></table>
</div>
		<p>鸟哥第一次玩 vim 的分割窗口时，真是很高兴啊！竟然有这种功能！太棒了！ ^_^</p>
	<br></div><br>
	<a id="vim_com"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.3.4 vim 的挑字补全功能</h2>
		<p>我们知道 bash 的环境底下可以按下 [tab] 按钮来达成指令/参数/文件名的补全功能，而我们也知道很多的程序编辑器，例如鸟哥用来在 
		windows 系统上面教网页设计、java script 等很好用的 notepad++ (<a href="https://notepad-plus-plus.org/" target="_blank">https://notepad-plus-plus.org/</a>)
		这种类的程序编辑器，都会有 (1)可以进行语法检验及 (2)可以根据扩展名来挑字的功能！这两个功能对于编程者来说，
		是很有帮助的！毕竟偶尔某些特定的关键字老是背不起来...</p>
		<p>在语法检验方面，vim 已经使用颜色来达成了！这部份不用伤脑筋的！比较伤脑筋的应该是在挑字补全上面！就是上面谈到的可以根据语法来挑选可能的关键字，
		包括编程语言的语法以及特定的语法关键字等等。既然 notepad ++ 都有支持了，没道理 vim 不支持吧？呵呵！没错！
		是有支持的～只是你可能要多背两个组合按钮就是了！</p>
		<p>鸟哥建议可以记忆的主要 vim 补齐功能，大致有底下几个：</p>
<table class="news">
<tbody><tr class="theader"><td>组合按钮</td><td>补齐的内容</td></tr>
<tr><td>[ctrl]+x -&gt; [ctrl]+n</td><td>透过目前正在编辑的这个『文件的内容文本』作为关键字，予以补齐</td></tr>
<tr><td>[ctrl]+x -&gt; [ctrl]+f</td><td>以当前目录内的『文件名』作为关键字，予以补齐</td></tr>
<tr><td>[ctrl]+x -&gt; [ctrl]+o</td><td>以扩展名作为语法补充，以 vim 内置的关键字，予以补齐</td></tr>
</tbody></table>
		<p>在鸟哥的认知中，比较有用的是第1, 3 这两个组合键，第一个组合按键中，你可能会在同一个文件里面重复出现许多相同的关键字，
		那么就能够透过这个补全的功能来处理。如果你是想要使用 vim 内置的语法检验功能来处理取得关键字的补全，那么第三个项目就很有用了。
		不过要注意，如果你想要使用第三个功能，就得要注意你编辑的文件的扩展名。我们底下来做个简单测试好了。</p>
		<p>假设你想要编写网页，正要使用到 CSS 的美化功能时，突然想到有个背景的东西要处理，但是突然忘记掉背景的 CSS 关键语法，那可以使用如下的模样来处置！
		请注意，一定要使用 .html 或 .html 的扩展名，否则 vim 不会调用正确的语法检验功能喔！因此底下我们创建的文件名为 html.html 啰！</p>
	<a id="fig9.3.9"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/centos7_vim-complete-01.jpg" alt="vim 的挑字补全功能" title="vim 的挑字补全功能" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.9、vim 的挑字补全功能</div>
		<p>由于网页通常会支持 CSS 的语法，而 CSS 的美化语法使用的是 style 这个关键字，这个关键字后面接的就是 CSS 的元素与元素值。
		若想要取得可能的元素有哪些，例如背景 (background) 的语法中，想要了解有哪些跟它有关的内置元素，如上图，
		直接输入 b 然后按下 [ctrl]+x 再按下 [ctrl]+o 就会出现如上的相关字词可以选择，此时你就能够使用上下按钮来挑选所需要的关键元素！
		这样使用上当然方便很多啊！只是要注意，一定要使用正确的扩展名，否则会无法出现任何关键字词喔！</p>
	<br></div><br>
	<a id="vim_set"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.3.5 vim 环境设置与记录： ~/.vimrc, ~/.viminfo</h2>
		<p>有没有发现，如果我们以 vim 软件来搜索一个文件内部的某个字符串时，这个字符串会被反白，
		而下次我们再次以 vim 编辑这个文件时，该搜索的字符串反白情况还是存在呢！甚至于在编辑其他文件时，
		如果其他文件内也存在这个字符串，哇！竟然还是主动反白耶！真神奇！
		另外，当我们重复编辑同一个文件时，当第二次进入该文件时，
		光标竟然就在上次离开的那一列上头呢！真是好方便啊～但是，怎么会这样呢？</p>
		<p><span class="text_import2">这是因为我们的 vim 会主动的将你曾经做过的行为登录下来，好让你下次可以轻松的作业啊！
		那个记录动作的文件就是： ~/.viminfo </span>！如果你曾经使用过 vim，
		那你的家目录应该会存在这个文件才对。这个文件是自动产生的，
		你不必自行创建。而你在 vim 里头所做过的动作，就可以在这个文件内部查找到啰～ ^_^</p>
		<p>此外，每个 distributions 对 vim 的缺省环境都不太相同，举例来说，某些版本在搜索到关键字时并不会高亮度反白，
		有些版本则会主动的帮你进行缩进的行为。但这些其实都可以自行设置的，那就是 vim 的环境设置啰～
		vim 的环境设置参数有很多，如果你想要知道目前的设置值，可以在一般指令模式时输入『 :set all 』
		来查阅，不过.....设置项目实在太多了～所以，鸟哥在这里仅列出一些平时比较常用的一些简单的设置值，
		提供给你参考啊。</p>
		<fieldset class="vbirdface"><legend style="font-family: serif; font-size:12pt; color: darkblue;">Tips</legend><img src="./vbird_files/vbird_face.gif" alt="鸟哥的图标" title="鸟哥的图标" style="float: right;">		所谓的缩进，就是当你按下 Enter 编辑新的一列时，光标不会在行首，而是在与上一列的第一个非空白字符处对齐！
		</fieldset><br>
<div class="fontwidth">
<table class="news">
<tbody><tr class="theader"><td colspan="2" class="tcenter">vim 的环境设置参数</td></tr>
	<tr><td style="text-align:center; width: 170px">:set nu<br>:set nonu</td><td>就是设置与取消行号啊！</td></tr>
	<tr><td style="text-align:center">:set hlsearch<br>:set nohlsearch</td><td>hlsearch 就是 high light search(高亮度搜索)。
		这个就是设置是否将搜索的字符串反白的设置值。默认值是 hlsearch</td></tr>
	<tr><td style="text-align:center">:set autoindent<br>:set noautoindent</td><td>是否自动缩进？autoindent 就是自动缩进。</td></tr>
	<tr><td style="text-align:center">:set backup</td><td>是否自动保存备份档？一般是 nobackup 的，
		如果设置 backup 的话，那么当你更动任何一个文件时，则源文件案会被另存成一个文件名为 filename~ 的文件。
		举例来说，我们编辑 hosts ，设置 :set backup ，那么当更动 hosts 时，在同目录下，就会产生 hosts~ 
		文件名的文件，记录原始的 hosts 文件内容</td></tr>
	<tr><td style="text-align:center">:set ruler</td><td>还记得我们提到的右下角的一些状态栏说明吗？
		这个 ruler 就是在显示或不显示该设置值的啦！</td></tr>
	<tr><td style="text-align:center">:set showmode</td><td>这个则是，是否要显示 --INSERT-- 
		之类的字眼在左下角的状态栏。</td></tr>
	<tr><td style="text-align:center">:set backspace=(012)</td><td>一般来说，
		如果我们按下 i 进入编辑模式后，可以利用倒退键 (backspace) 来删除任意字符的。
		但是，某些 distribution 则不许如此。此时，我们就可以透过 backspace 来设置啰～
		当 backspace 为 2 时，就是可以删除任意值；0 或 1 时，仅可删除刚刚输入的字符，
		而无法删除原本就已经存在的文本了！</td></tr>
	<tr><td style="text-align:center">:set all</td><td>显示目前所有的环境参数设置值。</td></tr>
	<tr><td style="text-align:center">:set</td><td>显示与系统默认值不同的设置参数，
		一般来说就是你有自行变动过的设置参数啦！</td></tr>
	<tr><td style="text-align:center">:syntax on<br>:syntax off</td><td>是否依据程序相关语法显示不同颜色？
		举例来说，在编辑一个纯文本档时，如果开头是以 # 开始，那么该列就会变成蓝色。
		如果你懂得写程序，那么这个 :syntax on 还会主动的帮你调试呢！但是，
		如果你仅是编写纯文本文件，要避免颜色对你的屏幕产生的干扰，则可以取消这个设置 。</td></tr>
	<tr><td style="text-align:center">:set bg=dark<br>:set bg=light</td><td>
		可用以显示不同的颜色色调，缺省是『 light 』。如果你常常发现注解的字体深蓝色实在很不容易看，
		那么这里可以设置为 dark 喔！试看看，会有不同的样式呢！</td></tr>
</tbody></table>
</div>
		<p>总之，这些设置值很有用处的啦！但是......我是否每次使用 vim 都要重新设置一次各个参数值？
		这不太合理吧？没错啊！所以，我们可以透过设置档来直接规定我们习惯的 vim 操作环境呢！
		<span class="text_import2">整体 vim 的设置值一般是放置在 /etc/vimrc 这个文件，不过，不建议你修改他！
		你可以修改 ~/.vimrc 这个文件</span> (缺省不存在，请你自行手动创建！)，将你所希望的设置值写入！
		举例来说，可以是这样的一个文件：</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">vim ~/.vimrc</span>
<span class="term_write">"这个文件的双引号 (") 是注解
set hlsearch            "高亮度反白
set backspace=2         "可随时用倒退键删除
set autoindent          "自动缩进
set ruler               "可显示最后一列的状态
set showmode            "左下角那一列的状态
set nu                  "可以在每一列的最前面显示行号啦！
set bg=dark             "显示不同的底色色调
syntax on               "进行语法检验，颜色显示。</span>
</pre></td></tr></tbody></table>
		<p>在这个文件中，使用『 set hlsearch 』或『 :set hlsearch 』，亦即最前面有没有冒号『 : 』效果都是一样的！
		至于双引号则是注解符号！不要用错注解符号，否则每次使用 vim 时都会发生警告消息喔！
		创建好这个文件后，当你下次重新以 vim 编辑某个文件时，该文件的缺省环境设置就是上头写的啰～
		这样，是否很方便你的操作啊！多多利用 vim 的环境设置功能呢！^_^</p>
	<br></div><br>
	<a id="vim_fig"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.3.6 vim 常用指令示意图</h2>
		<p>为了方便大家查找在不同的模式下可以使用的 vim 指令，鸟哥查找了一些 vim 与 Linux 教育训练手册，
		发现底下这张图非常值得大家参考！可以更快速有效的查找到需要的功能喔！看看吧！</p>
	<a id="fig9.3.10"></a>
	<div style="text-align:center; margin: 0 auto 0 auto; "><img src="./vbird_files/vim-commands.jpg" alt="vim 常用指令示意图" title="vim 常用指令示意图" style="border: 1px solid black; padding: 10px "></div>
	<div style="text-align: center;">图9.3.10、vim 常用指令示意图</div>
	<br></div>
</div>
<a id="tips"></a>
<div class="block1">
<h2>9.4 其他 vim 使用注意事项</h2>
	<p>vim 其实不是那么好学，虽然他的功能确实非常强大！所以底下我们还有一些需要注意的地方要来跟大家分享喔！</p>
	<a id="tips_code"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.4.1 中文编码的问题</h2>
		<p>很多朋友常常哀嚎，说他们的 vim 里面怎么无法显示正常的中文啊？其实这很有可能是因为编码的问题！
		因为中文编码有 big5 与 utf8 两种，如果你的文件是使用 big5 编码制作的，但在 vim 的终端接口中你使用的是万国码(utf8)，
		由于编码的不同，你的中文文件内容当然就是一堆乱码了！怎么办？这时你得要考虑许多东西啦！有这些：</p>
		<ol>
		<li>你的 Linux 系统缺省支持的语系数据：这与 /etc/locale.conf 有关；</li>
		<li>你的终端接口 (bash) 的语系： 这与 LANG, LC_ALL 这几个变量有关；</li>
		<li>你的文件原本的编码；</li>
		<li>开启终端机的软件，例如在 GNOME 底下的窗口接口。</li>
		</ol>
		<p>事实上最重要的是上头的第三与第四点，只要这两点的编码一致，你就能够正确的看到与编辑你的中文文件。
		否则就会看到一堆乱码啦！</p>
		<p>一般来说，中文编码使用 big5 时，在写入某些数据库系统中，在『许、盖、功』这些字体上面会发生错误！
		所以近期以来大多希望大家能够使用万国码 utf8 来进行中文编码！但是在中文 Windows 上的软件常常缺省使用 big5 的编码 
		(不一定是 windows 系统的问题，有时候是某些中文软件的默认值之故)，
		包括鸟哥由于沿用以前的文档数据文件，也大多使用 big5 的编码。此时就得要注意上述的这些咚咚啰。</p>
		<p>在 Linux 本机前的 tty1~tty6 原本缺省就不支持中文编码，所以不用考虑这个问题！因为你一定会看到乱码！呵呵！
		现在鸟哥假设俺的文档文件内编码为 big5 时，而且我的环境是使用 Linux 的 GNOME ，启动的终端接口为 GNOME-terminal 软件，
		那鸟哥通常是这样来修正语系编码的行为：</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">LANG=zh_TW.big5</span>
[dmtsai@study ~]$ <span class="term_command">export LC_ALL=zh_TW.big5</span>
</pre></td></tr></tbody></table>
		<p>然后在终端接口工具列的<span class="text_import2">『终端机』--&gt;『设置字符编码』
		--&gt;『中文 (正体) (BIG5)』</span>项目点击一下，
		如果一切都没有问题了，再用 vim 去开启那个 big5 编码的文件，就没有问题了！以上！报告完毕！</p>
	<br></div><br>
	<a id="tips_dos"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.4.2 DOS 与 Linux 的断行字符</h2>
		<p>我们在<a href="0220filemanager.html">第六章</a>里面谈到
		<a href="0220filemanager.html#cat">cat</a> 这个指令时，曾经提到过 DOS 与 Linux 断行字符的不同。
		而我们也可以利用 cat -A 来观察以 DOS (Windows 系统) 创建的文件的特殊格式，
		也可以发现在 DOS 使用的断行字符为 ^M$ ，我们称为 CR 与 LF 两个符号。
		而在 Linux 底下，则是仅有 LF ($) 这个断行符号。这个断行符号对于 Linux 的影响很大喔！
		为什么呢？</p>
		<p>我们说过，在 Linux 底下的指令在开始运行时，他的判断依据是 『Enter』，而 Linux 的 Enter 为 LF 符号，
		不过，由于 DOS 的断行符号是 CRLF ，也就是多了一个 ^M 的符号出来，
		在这样的情况下，如果是一个 shell script 的程序文件，呵呵～将可能造成『程序无法运行』的状态～
		因为他会误判程序所下达的指令内容啊！这很伤脑筋吧！</p>
		<p>那怎么办啊？很简单啊，将格式转换成为 Linux 即可啊！『废话』，这当然大家都知道，但是，
		要以 vi 进入该文件，然后一个一个删除每一列的 CR 吗？当然没有这么没人性啦！
		我们可以透过简单的指令来进行格式的转换啊！</p>
		<p>不过，由于我们要操作的指令缺省并没有安装，鸟哥也无法预期你有没有网络，因此假设你没有网络的状况下，
		请拿出你的原版光盘，放到光驱里头去，然后使用底下的方式来安装我们所需要的这个软件喔！</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">su -</span>   <span class="term_note"># 安装软件一定要是 root 的权限才行！</span>
[root@study ~]# <span class="term_command">mount /dev/sr0 /mnt</span>
[root@study ~]# <span class="term_command">rpm -ivh /mnt/Packages/dos2unix-*</span>
warning: /mnt/Packages/dos2unix-6.0.3-4.el7.x86_64.rpm: Header V3 RSA/SHA256 ....
Preparing...                          ################################# [100%]
Updating / installing...
   1:dos2unix-6.0.3-4.el7             ################################# [100%]
[root@study ~]# <span class="term_command">umount /mnt</span>
[root@study ~]# <span class="term_command">exit</span>
</pre></td></tr></tbody></table>
		<p>那就开始来玩一玩这个字符转换吧！</p>
<a id="dos2unix"></a><a id="unix2dos"></a>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">dos2unix [-kn] file [newfile]</span>
[dmtsai@study ~]$ <span class="term_command">unix2dos [-kn] file [newfile]</span>
<span class="term_say">选项与参数：
-k  ：保留该文件原本的 mtime 时间格式 (不更新文件上次内容经过修订的时间)
-n  ：保留原本的旧档，将转换后的内容输出到新文件，如： dos2unix -n old new</span>
<span class="term_hd">范例一：将 /etc/man_db.conf 重新复制到 /tmp/vitest/ 底下，并将其修改成为 dos 断行</span>
[dmtsai@study ~]# <span class="term_command">cd /tmp/vitest</span>
[dmtsai@study vitest]$ <span class="term_command">cp -a /etc/man_db.conf .</span>
[dmtsai@study vitest]$ <span class="term_command">ll man_db.conf</span>
-rw-r--r--. 1 root root <span class="term_write">5171</span> Jun 10  2014 man_db.conf
[dmtsai@study vitest]$ <span class="term_command">unix2dos -k man_db.conf</span>
unix2dos: converting file man_db.conf to DOS format ...
<span class="term_say"># 屏幕会显示上述的消息，说明断行转为 DOS 格式了！</span>
[dmtsai@study vitest]$ <span class="term_command">ll man_db.conf</span>
-rw-r--r--. 1 dmtsai dmtsai <span class="term_write">5302</span> Jun 10  2014 man_db.conf
<span class="term_say"># 断行字符多了 ^M ，所以容量增加了！</span>
<span class="term_hd">范例二：将上述的 man_db.conf 转成 Linux 断行字符，并保留旧档，新档放于 man_db.conf.linux</span>
[dmtsai@study vitest]$ <span class="term_command">dos2unix -k -n man_db.conf man_db.conf.linux</span>
dos2unix: converting file man_db.conf to file man_db.conf.linux in Unix format ...
[dmtsai@study vitest]$ <span class="term_command">ll man_db.conf*</span>
-rw-r--r--. 1 dmtsai dmtsai 5302 Jun 10  2014 man_db.conf
-rw-r--r--. 1 dmtsai dmtsai 5171 Jun 10  2014 man_db.conf.linux
[dmtsai@study vitest]$ <span class="term_command">file man_db.conf*</span>
man_db.conf:       ASCII text, with CRLF line terminators  <span class="term_note"># 很清楚说明是 CRLF 断行！</span>
man_db.conf.linux: ASCII text
</pre></td></tr></tbody></table>
		<p>因为断行字符以及 DOS 与 Linux 操作系统底下一些字符的定义不同，因此，
		不建议你在 Windows 系统当中将文件编辑好之后，才上传到 Linux 系统，会容易发生错误问题。
		而且，如果你在不同的系统之间复制一些纯文本文件时，千万记得要使用 unix2dos 或 dos2unix 来转换一下断行格式啊！</p>
	<br></div><br>
	<a id="tips_translate"></a>
	<div class="block2"><div class="gototop"><a href="0310vi.html#top">Top</a></div>
	<h2>9.4.3 语系编码转换</h2>
		<p>很多朋友都会有的问题，就是想要将语系编码进行转换啦！举例来说，想要将 big5 编码转成 utf8 。
		这个时候怎么办？难不成要每个文件打开会转存成 utf8 吗？不需要这样做啦！使用 iconv 这个指令即可！
		鸟哥将之前的 vi 章节做成 big5 编码的文件，你可以照底下的链接来下载先：</p>
		<ul><li><a href="0310vi/vi.big5">0310vi/vi.big5</a></li></ul>
		<p>在终端机的环境下你可以使用『 wget 网址』来下载上述的文件喔！鸟哥将他下载在 /tmp/vitest 目录下。
		接下来让我们来使用 iconv 这个指令来玩一玩编码转换吧！</p>
<a id="iconv"></a>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study ~]$ <span class="term_command">iconv --list</span>
[dmtsai@study ~]$ <span class="term_command">iconv -f 原本编码 -t 新编码 filename [-o newfile]</span>
<span class="term_say">选项与参数：
--list ：列出 iconv 支持的语系数据
-f     ：from ，亦即来源之意，后接原本的编码格式；
-t     ：to ，亦即后来的新编码要是什么格式；
-o file：如果要保留原本的文件，那么使用 -o 新文件名，可以创建新编码文件。</span>
<span class="term_hd">范例一：将 /tmp/vitest/vi.big5 转成 utf8 编码吧！</span>
[dmtsai@study ~]$ <span class="term_command">cd /tmp/vitest</span>
[dmtsai@study vitest]$ <span class="term_command">iconv -f big5 -t utf8 vi.big5 -o vi.utf8</span>
[dmtsai@study vitest]$ <span class="term_command">file vi*</span>
vi.big5: ISO-8859 text, with CRLF line terminators
vi.utf8: UTF-8 Unicode text, with CRLF line terminators
<span class="term_say"># 是吧！有明显的不同吧！ ^_^</span>
</pre></td></tr></tbody></table>
		<p>这指令支持的语系非常之多，除了正体中文的 big5, utf8 编码之外，也支持简体中文的 gb2312 ，
		所以对岸的朋友可以简单的将鸟站的网页数据下载后，利用这个指令来转成简体，就能够轻松的读取文档数据啰！
		不过，不要将转成简体的文件又上传成为您自己的网页啊！这明明是鸟哥写的不是吗？ ^_^</p>
		<p>不过如果是要将正体中文的 utf8 转成简体中文的 utf8 编码时，那就得费些功夫了！
		举例来说，如果要将刚刚那个 vi.utf8 转成简体的 utf8 时，可以这样做：</p>
<table class="term"><tbody><tr><td class="term"><pre>[dmtsai@study vitest]$ <span class="term_command">iconv -f utf8 -t big5 vi.utf8 | \</span>
&gt; <span class="term_command">iconv -f big5 -t gb2312 | iconv -f gb2312 -t utf8 -o vi.gb.utf8</span>
</pre></td></tr></tbody></table>
	<br></div>
</div>
<a id="hint"></a>
<div class="block1">
<h2>9.5 重点回顾</h2>
<ul class="text_import2">
	<li>Linux 底下的设置档多为文本档，故使用 vim 即可进行设置编辑；</li>
	<li>vim 可视为程序编辑器，可用以编辑 shell script, 设置档等，避免打错字；</li>
	<li>vi 为所有 unix like 的操作系统都会存在的编辑器，且运行速度快速；</li>
	<li>vi 有三种模式，一般指令模式可变换到编辑与指令列模式，但编辑模式与指令列模式不能互换；</li>
	<li>常用的按键有i, [Esc], :wq 等；</li>
	<li>vi 的画面大略可分为两部份，(1)上半部的本文与(2)最后一行的状态+指令列模式；</li>
	<li>数字是有意义的，用来说明重复进行几次动作的意思，如 5yy 为复制 5  列之意；</li>
	<li>光标的移动中，大写的 G 经常使用，尤其是 1G, G 移动到文章的头/尾功能！</li>
	<li>vi 的取代功能也很棒！ :n1,n2s/old/new/g 要特别注意学习起来；</li>
	<li>小数点『 . 』为重复进行前一次动作，也是经常使用的按键功能！</li>
	<li>进入编辑模式几乎只要记住： i, o, R 三个按钮即可！尤其是添加一列的 o 与取代的 R</li>
	<li>vim 会主动的创建 swap 暂存盘，所以不要随意断线！</li>
	<li>如果在文章内有对齐的区块，可以使用 [ctrl]-v 进行复制/粘贴/删除的行为</li>
	<li>使用 :sp 功能可以分割窗口</li>
	<li>若使用 vim 来撰写网页，若需要 CSS 元素数据，可透过 [ctrl]+x, [ctrl]+o 这两个连续组合按键来取得关键字</li>
	<li>vim 的环境设置可以写入在 ~/.vimrc 文件中；</li>
	<li>可以使用 iconv 进行文件语系编码的转换</li>
	<li>使用 dos2unix 及 unix2dos 可以变更文件每一列的行尾断行字符。</li>
</ul>
</div>
<a id="ex"></a>
<div class="block1">
<h2>9.6 本章练习</h2>
(要看答案请将鼠标移动到『答：』底下的空白处，按下左键圈选空白处即可察看)
实作题部分：
<ul>
	<li>在第七章的情境仿真题二的第五点，编写 /etc/fstab 时，当时使用 nano 这个指令，
	请尝试使用 vim 去编辑 /etc/fstab ，并且将第七章添加的那一列的 defatuls 改成 default ，会出现什么状态？
	离开前请务必要修订成原本正确的信息。此外，如果将该列注解 (最前面加 #)，你会发现字体颜色也有变化喔！<br><br></li>
	<li>尝试在你的系统中，你惯常使用的那个帐号的家目录下，将本章介绍的 vimrc 内容进行一些常用设置，包括：<br>
		<ul>
		<li>设置搜索高亮度反白</li>
		<li>设置语法检验启动</li>
		<li>设置缺省启动行号显示</li>
		<li>设置有两行状态栏 (一行状态+一行指令列) :set laststatus=2</li>
		</ul></li>
</ul>
<hr>简答题部分：
<ul>
	<li>我用 vi 开启某个文件后，要在第 34 列向右移动 15 个字符，应该在一般指令模式中下达什么指令？
	<div class="blockex">
		(1)先按下 34G 到第 34 列；(2)再按下 [ 15 + 向右键 ]，或 [ 15l ] 亦可！
	</div></li>
	<li>在 vi 开启的文件中，如何去到该文件的页眉或页脚？
	<div class="blockex">
		去页眉按下 1G 或 gg ；去页脚按下 G 即可
	</div></li>
	<li>在 vi 开启的文件中，如何在光标所在列中，移动到行头及行尾？
	<div class="blockex">
		移动到行头，按 0 ，移动到行尾按 $ 即可！
	</div></li>
	<li>vi 的一般指令模式情况下，按下『 r 』有什么功能？
	<div class="blockex">
		取代光标所在的那个字符
	</div></li>
	<li>在 vi 的环境中，如何将目前正在编辑的文件另存新文件名为 newfilename？
	<div class="blockex">
		:w newfilename
	</div></li>
	<li>在 linux 底下最常使用的文书编辑器为 vi ，请问如何进入编辑模式？
	<div class="blockex">
		在一般指令模式底下输入： i, I, a, A 为在本列当中输入新字符；(出现 –Insert- )<br>
		在一般指令模式当中输入： o, O 为在一个新的一列输入新字符；<br>
		在一般指令模式当中输入： r, R 为取代字符！（左下角出现 –Replace-）
	</div></li>
	<li>在 vi 软件中，如何由编辑模式跳回一般指令模式？
	<div class="blockex">
		可以按下[Esc]
	</div></li>
	<li>在 vi 环境中，若上下左右键无法使用时，请问如何在一般指令模式移动光标？
	<div class="blockex">
		[h, j, k, l]分别代表[左、下、上、右]
	</div></li>
	<li>在 vi 的一般指令模式中，如何删除一列、n列；如何删除一个字符？
	<div class="blockex">
		分别为 dd, ndd, x 或 X （dG 及 d1G 分别表示删除到页眉及页脚）
	</div></li>
	<li>在 vi 的一般指令模式中，如何复制一列、n列并加以粘贴？
	<div class="blockex">
		分别为 yy, nyy, p 或 P
	</div></li>
	<li>在 vi 的一般指令模式中如何搜索 string 这个字符串？
	<div class="blockex">
		?string (往前搜索)<br>
		/string (往后搜索)
	</div></li>
	<li>在 vi 的一般指令模式中，如何取代 word1 成为 word2，而若需要用户确认机制，又该如何？
	<div class="blockex">
		:1,$s/word1/word2/g 或<br>
		:1,$s/word1/word2/gc （需要用户确认）
	</div></li>
	<li>在 vi 目前的编辑文件中，在一般指令模式下，如何读取一个文件 filename 进来目前这个文件？
	<div class="blockex">
		:r filename
	</div></li>
	<li>在 vi 的一般指令模式中，如何存盘、离开、存盘后离开、强制存盘后离开？
	<div class="blockex">
		:w； :q： :wq； :wq!
	</div></li>
	<li>在 vi 底下作了很多的编辑动作之后，却想还原成原来的文件内容，应该怎么进行？
	<div class="blockex">
		直接按下 :e! 即可恢复成文件的原始状态！
	</div></li>
	<li>我在 vi 这个程序当中，不想离开 vi ，但是想运行 ls /home 这个指令，vi 有什么额外的功能可以达到这个目的：
	<div class="blockex">
		事实上，可以使用[ :! ls /home ]不过，如果你学过后面的章节之后，你会发现，运行[ ctrl + z ]亦可暂时退出
		vi 让你在指令列模式当中运行指令喔！
	</div></li>
</ul>
</div>
<a id="reference"></a>
<div class="block1">
<h2>9.7 参考数据与延伸阅读</h2>
<ul>
	<li><a id="ps1"></a>注1：常见文书编辑器项目计划链接：
	<ul>
		<li>emacs: <a href="http://www.gnu.org/software/emacs/" target="_blank">http://www.gnu.org/software/emacs/</a></li>
		<li>pico: <a href="https://en.wikipedia.org/wiki/Pico_(text_editor)" target="_blank">https://en.wikipedia.org/wiki/Pico_(text_editor)</a></li>
		<li>nano: <a href="http://sourceforge.net/projects/nano/" target="_blank">http://sourceforge.net/projects/nano/</a></li>
		<li>joe: <a href="http://sourceforge.net/projects/joe-editor/" target="_blank">http://sourceforge.net/projects/joe-editor/</a></li>
		<li>vim: <a href="http://www.vim.org/" target="_blank">http://www.vim.org</a></li>
		<li>常见文书编辑器比较：<a href="http://encyclopedia.thefreedictionary.com/List+of+text+editors" target="_blank">http://encyclopedia.thefreedictionary.com/List+of+text+editors</a></li>
		<li>维基百科的文书编辑器比较：<a href="http://en.wikipedia.org/wiki/Comparison_of_text_editors" target="_blank">http://en.wikipedia.org/wiki/Comparison_of_text_editors</a></li>
	</ul></li>
	<li>维基百科：ASCII 的代码与图标对应表：<a href="http://zh.wikipedia.org/wiki/ASCII" target="_blank">http://zh.wikipedia.org/wiki/ASCII</a></li>
	<li>关于 vim 是什么的『中文』说明：<a href="http://www.vim.org/6k/features.zh.txt" target="_blank">http://www.vim.org/6k/features.zh.txt</a>。</li>
	<li>vim 补齐功能介绍：<a href="http://www.openfoundry.org/en/tech-column/2215" target="_blank">http://www.openfoundry.org/en/tech-column/2215</a></li>
</ul>
</div>
</div>	<!-- mainarea -->
</div>  
</body></html>